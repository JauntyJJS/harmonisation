<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Utility Functions For A Data Harmonisation Project • harmonisation</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utility Functions For A Data Harmonisation Project">
<meta name="description" content="Utility functions to harmonise data for project.">
<meta property="og:description" content="Utility functions to harmonise data for project.">
</head>
<body>
<p>








  # https://github.com/r-lib/pkgdown/issues/2704
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">harmonisation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JauntyJJS/harmonisation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="data-harmonisation-project-template">Data Harmonisation Project Template<a class="anchor" aria-label="anchor" href="#data-harmonisation-project-template"></a>
</h1></div>
<p><a name="top"></a></p>
<!-- badges: start -->

<div class="section level2">
<h2 id="table-of-content">Table of Content<a class="anchor" aria-label="anchor" href="#table-of-content"></a>
</h2>
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#acknowledgement">Acknowledgement</a></li>
<li><a href="#file-structure">File Structure</a></li>
<li><a href="#software-installation">Software Installation</a></li>
<li><a href="#r-package-installation">R Package Installation</a></li>
<li><a href="#using-renv">Using <code>renv</code></a></li>
<li><a href="#r-functions-management">R Functions Management</a></li>
<li><a href="#r-packages-used">R Packages Used</a></li>
<li><a href="#r-platform-information">R Platform Information</a></li>
<li><a href="#data-harmonisation-report-for-each-cohort">Data Harmonisation Report For Each Cohort</a></li>
<li><a href="#combined-data-harmonisation-report-for-all-cohort">Combined Data Harmonisation Report For All Cohort</a></li>
<li><a href="#data-harmonisation-summary">Data Harmonisation Summary</a></li>
<li><a href="#general-recommendations">General Recommendations</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>Some large cohort studies involve the pooling of data from multiple sites, studies or clinical trials. Prior to statistical or machine learning analysis, a data steward must be able to not just clean but organise and sort through these heterogeneous inputs in a standardised and consistent format. This process is sometimes called retrospective data harmonisation. As methods of data harmonisation for certain data fields or variables can be complicated, it must be recorded in a coherent way such that different stakeholders (such as your collaborators or study committee members) can understand what is being done to the raw/provided data. Despite its importance in the big data environment, there are limit resources on how to document the data harmonisation process in a structured, efficient (with some automation) and robust way.</p>
<p>This repository aims to be a project template to allow a data steward to be able to create data harmonisation reports using <a href="https://www.r-project.org/" class="external-link">R</a> and <a href="https://quarto.org/" class="external-link">Quarto</a> books. To learn more about Quarto books visit <a href="https://quarto.org/docs/books" class="external-link uri">https://quarto.org/docs/books</a>.</p>
<p>Output of these reports are as follows:</p>
<p>Run the R script <code>cohort_harmonisation_script.R</code> in <code>codes</code> folder to generate:</p>
<ul>
<li>Cohort_A Harmonisation Report:
<ul>
<li>🌐 HTML: <a href="https://jauntyjjs-harmonisation-cohort-a.netlify.app" class="external-link uri">https://jauntyjjs-harmonisation-cohort-a.netlify.app</a>
</li>
<li>📕 PDF : <a href="https://jauntyjjs-harmonisation-cohort-a.netlify.app/Harmonisation-Template-for-Cohort-A.pdf" class="external-link uri">https://jauntyjjs-harmonisation-cohort-a.netlify.app/Harmonisation-Template-for-Cohort-A.pdf</a>
</li>
<li>📘 Word: <a href="https://jauntyjjs-harmonisation-cohort-a.netlify.app/Harmonisation-Template-for-Cohort-A.docx" class="external-link uri">https://jauntyjjs-harmonisation-cohort-a.netlify.app/Harmonisation-Template-for-Cohort-A.docx</a>
</li>
</ul>
</li>
<li>Cohort_B Harmonisation Report:
<ul>
<li>🌐 HTML: <a href="https://jauntyjjs-harmonisation-cohort-b.netlify.app" class="external-link uri">https://jauntyjjs-harmonisation-cohort-b.netlify.app</a>
</li>
<li>📕 PDF : <a href="https://jauntyjjs-harmonisation-cohort-b.netlify.app/Harmonisation-Template-for-Cohort-A.pdf" class="external-link uri">https://jauntyjjs-harmonisation-cohort-b.netlify.app/Harmonisation-Template-for-Cohort-A.pdf</a>
</li>
<li>📘 Word: <a href="https://jauntyjjs-harmonisation-cohort-b.netlify.app/Harmonisation-Template-for-Cohort-A.docx" class="external-link uri">https://jauntyjjs-harmonisation-cohort-b.netlify.app/Harmonisation-Template-for-Cohort-A.docx</a>
</li>
</ul>
</li>
</ul>
<p>Run the R script <code>cohort_all_harmonisation_script.R</code> in <code>codes</code> folder to generate:</p>
<ul>
<li>Combined (All cohorts) Harmonisation Report:
<ul>
<li>🌐 HTML: <a href="https://jauntyjjs-harmonisation-cohort-all.netlify.app" class="external-link uri">https://jauntyjjs-harmonisation-cohort-all.netlify.app</a>
</li>
</ul>
</li>
</ul>
<p>Run the R script <code>harmonisation_summary_script.R</code> in <code>codes</code> folder to generate:</p>
<ul>
<li>Harmonisation Summary:
<ul>
<li>🌐 HTML: <a href="https://jauntyjjs-harmonisation-summary.netlify.app" class="external-link uri">https://jauntyjjs-harmonisation-summary.netlify.app</a>
</li>
<li>📘 Word: <a href="https://jauntyjjs-harmonisation-summary.netlify.app/Harmonisation-Summary-Report-Template.docx" class="external-link uri">https://jauntyjjs-harmonisation-summary.netlify.app/Harmonisation-Summary-Report-Template.docx</a>
</li>
</ul>
</li>
</ul>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<p>Layout of this page is inspired from R package <a href="https://frbcesab.github.io/rcompendium" class="external-link"><code>rcompendium</code></a>.</p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="file-structure">File Structure<a class="anchor" aria-label="anchor" href="#file-structure"></a>
</h2>
<p>Here is the file structure of this project.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>harmonisation<span class="sc">/</span>                            <span class="co"># Root of the project template.</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>├── .quarto<span class="sc">/</span> (not <span class="cf">in</span> repository)          <span class="co"># Folder to keep intermediate files/folders </span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># generated when Quarto renders the files.</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>├── archive<span class="sc">/</span>                              <span class="co"># Folder to keep previous books and harmonised data.</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>│   ├── reports<span class="sc">/</span>                          <span class="co"># Folder to keep previous versions of</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># data harmonisation documentation.</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   ├── {some_date}_batch<span class="sc">/</span>            <span class="co"># Folder to keep {some_date} version of</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># data harmonisation documentation.</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   └── Flowchart.xlsx                <span class="co"># Flowchart sheet to record version control.</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="er">|</span>   └── harmonised<span class="sc">/</span>                       <span class="co"># Folder to keep previous version of harmonised data.</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="er">|</span>       ├── {some_date}_batch<span class="sc">/</span>            <span class="co"># Folder to keep {some_date} version of</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span>                                 <span class="co"># harmonised data.</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="er">|</span>       └── Flowchart.xlsx                <span class="co"># Flowchart sheet to record version control.</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>├── codes<span class="sc">/</span>                                <span class="co"># Folder to keep R/Quarto scripts </span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     <span class="co"># to run data harmonisation.</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>│   ├── {cohort name}<span class="sc">/</span>                    <span class="co"># Folder to keep Quarto scripts to run</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># data cleaning, harmonisation </span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># and output them for each cohort.</span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   └── preprocessed_data<span class="sc">/</span>            <span class="co"># Folder to keep preprocessed data.</span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>│   ├── harmonisation_summary<span class="sc">/</span>            <span class="co"># Folder to keep Quarto scripts to create</span></span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     <span class="co"># data harmonisation summary report.</span></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>│   ├── output<span class="sc">/</span>                           <span class="co"># Folder to keep harmonised data.</span></span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     </span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a><span class="er">|</span>   ├── cohort_harmonisation_script.R     <span class="co"># R script to render each {cohort name}/ folder. </span></span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span>                                     <span class="co"># folder into html, pdf and word document.</span></span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a><span class="er">|</span>   └── harmonisation_summary_script.R    <span class="co"># R script to render the {harmonisation_summary}/ </span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># folder into word document.</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a>│  </span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a>├── data<span class="sc">-</span>raw<span class="sc">/</span>                             <span class="co"># Folder to keep cohort raw data (.csv, .xlsx, etc.)</span></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>│   ├── {cohort name}<span class="sc">/</span>                    <span class="co"># Folder to keep cohort raw data.</span></span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   ├── {data_dictionary}             <span class="co"># Data dictionary file that correspond to the </span></span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># cohort raw data. Can be one from the</span></span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># collaborator provide or provided by us.</span></span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   └── Flowchart.xlsx                <span class="co"># Flowchart sheet to record version control.</span></span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a><span class="er">|</span>   ├── data<span class="sc">-</span>dictionary<span class="sc">/</span>                  <span class="co"># Folder to keep data dictionary </span></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># used for harmonising data.</span></span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   └── Flowchart.xlsx                <span class="co"># Flowchart sheet to record version control.</span></span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a><span class="er">|</span>   └── data<span class="sc">-</span>input<span class="sc">/</span>                       <span class="co"># Folder to keep data input file </span></span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span>                                 <span class="co"># for collaborators to fill in.</span></span>
<span id="cb1-60"><a href="#cb1-60" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span></span>
<span id="cb1-61"><a href="#cb1-61" tabindex="-1"></a><span class="er">|</span>       └── Flowchart.xlsx                <span class="co"># Flowchart sheet to record version control.</span></span>
<span id="cb1-62"><a href="#cb1-62" tabindex="-1"></a><span class="sc">|</span>  </span>
<span id="cb1-63"><a href="#cb1-63" tabindex="-1"></a>├── docs<span class="sc">/</span>                                 <span class="co"># Folder to keep R functions documentation </span></span>
<span id="cb1-64"><a href="#cb1-64" tabindex="-1"></a><span class="er">|</span>                                         <span class="co"># generated using pkgdown:::build_site_external().</span></span>
<span id="cb1-65"><a href="#cb1-65" tabindex="-1"></a><span class="er">|</span>  </span>
<span id="cb1-66"><a href="#cb1-66" tabindex="-1"></a>├── inst<span class="sc">/</span>                                 <span class="co"># Folder to keep arbitrary additional files </span></span>
<span id="cb1-67"><a href="#cb1-67" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     <span class="co"># to include in the project.</span></span>
<span id="cb1-68"><a href="#cb1-68" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>  </span>
<span id="cb1-69"><a href="#cb1-69" tabindex="-1"></a><span class="er">|</span>   └── WORDLIST                          <span class="co"># File generated by spelling::update_wordlist()</span></span>
<span id="cb1-70"><a href="#cb1-70" tabindex="-1"></a><span class="sc">|</span>  </span>
<span id="cb1-71"><a href="#cb1-71" tabindex="-1"></a>├── man<span class="sc">/</span>                                  <span class="co"># Folder to keep R functions documentation</span></span>
<span id="cb1-72"><a href="#cb1-72" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     <span class="co"># generated using devtools::document().</span></span>
<span id="cb1-73"><a href="#cb1-73" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-74"><a href="#cb1-74" tabindex="-1"></a>│   ├── {fun<span class="sc">-</span>demo}.Rd                     <span class="co"># Documentation of the demo R function.</span></span>
<span id="cb1-75"><a href="#cb1-75" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-76"><a href="#cb1-76" tabindex="-1"></a>│   └── harmonisation<span class="sc">-</span>template.Rd         <span class="co"># High-level documentation.</span></span>
<span id="cb1-77"><a href="#cb1-77" tabindex="-1"></a><span class="sc">|</span>  </span>
<span id="cb1-78"><a href="#cb1-78" tabindex="-1"></a>├── R<span class="sc">/</span>                                    <span class="co"># Folder to keep R functions.</span></span>
<span id="cb1-79"><a href="#cb1-79" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-80"><a href="#cb1-80" tabindex="-1"></a>│   ├── {fun<span class="sc">-</span>demo}.R                      <span class="co"># Script with R functions.</span></span>
<span id="cb1-81"><a href="#cb1-81" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-82"><a href="#cb1-82" tabindex="-1"></a>│   └── harmonisation<span class="sc">-</span>package.R           <span class="co"># Dummy R file for high-level documentation.</span></span>
<span id="cb1-83"><a href="#cb1-83" tabindex="-1"></a>│  </span>
<span id="cb1-84"><a href="#cb1-84" tabindex="-1"></a>├── renv<span class="sc">/</span> (not <span class="cf">in</span> repository)             <span class="co"># Folder to keep all packages </span></span>
<span id="cb1-85"><a href="#cb1-85" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># installed in the renv environment.</span></span>
<span id="cb1-86"><a href="#cb1-86" tabindex="-1"></a><span class="er">|</span> </span>
<span id="cb1-87"><a href="#cb1-87" tabindex="-1"></a>├── reports<span class="sc">/</span>                              <span class="co"># Folder to keep the most recent data harmonisation</span></span>
<span id="cb1-88"><a href="#cb1-88" tabindex="-1"></a><span class="er">|</span>                                         <span class="co"># documentation.</span></span>
<span id="cb1-89"><a href="#cb1-89" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-90"><a href="#cb1-90" tabindex="-1"></a>├── templates<span class="sc">/</span>                            <span class="co"># Folder to keep template files needed to generate</span></span>
<span id="cb1-91"><a href="#cb1-91" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>                                     <span class="co"># data harmonisation documentation efficiently.</span></span>
<span id="cb1-92"><a href="#cb1-92" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-93"><a href="#cb1-93" tabindex="-1"></a><span class="er">|</span>   ├── quarto<span class="sc">-</span>yaml<span class="sc">/</span>                      <span class="co"># Folder to keep template files to generate </span></span>
<span id="cb1-94"><a href="#cb1-94" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># data harmonisation documentation structure </span></span>
<span id="cb1-95"><a href="#cb1-95" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># in Quarto. </span></span>
<span id="cb1-96"><a href="#cb1-96" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-97"><a href="#cb1-97" tabindex="-1"></a>│   <span class="sc">|</span>   ├── _quarto_{cohort name}.yml     <span class="co"># Quarto book template data harmonisation documentation </span></span>
<span id="cb1-98"><a href="#cb1-98" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span>   <span class="er">|</span>                                 <span class="co"># for {cohort name}.</span></span>
<span id="cb1-99"><a href="#cb1-99" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   <span class="er">|</span></span>
<span id="cb1-100"><a href="#cb1-100" tabindex="-1"></a><span class="er">|</span>   <span class="er">|</span>   └── _quarto_summary.yml           <span class="co"># Quarto book template data harmonisation summary.</span></span>
<span id="cb1-101"><a href="#cb1-101" tabindex="-1"></a><span class="sc">|</span>   <span class="er">|</span></span>
<span id="cb1-102"><a href="#cb1-102" tabindex="-1"></a><span class="er">|</span>   └── index<span class="sc">-</span>qmd<span class="sc">/</span>                        <span class="co"># Folder to keep template files to generate</span></span>
<span id="cb1-103"><a href="#cb1-103" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span>                                 <span class="co"># the preface page of the data harmonisation </span></span>
<span id="cb1-104"><a href="#cb1-104" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span>                                 <span class="co"># documentation.</span></span>
<span id="cb1-105"><a href="#cb1-105" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span></span>
<span id="cb1-106"><a href="#cb1-106" tabindex="-1"></a><span class="er">|</span>       ├── _index_report.qmd             <span class="co"># Preface template for each cohort data harmonisation</span></span>
<span id="cb1-107"><a href="#cb1-107" tabindex="-1"></a><span class="sc">|</span>       <span class="er">|</span>                                 <span class="co"># report. </span></span>
<span id="cb1-108"><a href="#cb1-108" tabindex="-1"></a><span class="er">|</span>       <span class="er">|</span></span>
<span id="cb1-109"><a href="#cb1-109" tabindex="-1"></a><span class="er">|</span>       └── _index_summary.qmd            <span class="co"># Preface template for data harmonisation </span></span>
<span id="cb1-110"><a href="#cb1-110" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># summary report. </span></span>
<span id="cb1-111"><a href="#cb1-111" tabindex="-1"></a><span class="er">|</span>        </span>
<span id="cb1-112"><a href="#cb1-112" tabindex="-1"></a>├── tests<span class="sc">/</span>                                <span class="co"># Folder to keep test unit files. </span></span>
<span id="cb1-113"><a href="#cb1-113" tabindex="-1"></a><span class="er">|</span>                                         <span class="co"># Files will be used by R package testhat.</span></span>
<span id="cb1-114"><a href="#cb1-114" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-115"><a href="#cb1-115" tabindex="-1"></a>├── .Rbuildignore                         <span class="co"># List of files/folders to be ignored while </span></span>
<span id="cb1-116"><a href="#cb1-116" tabindex="-1"></a>│                                         <span class="co"># checking/installing the package.</span></span>
<span id="cb1-117"><a href="#cb1-117" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-118"><a href="#cb1-118" tabindex="-1"></a>├── <span class="fu">.Renviron</span> (not <span class="cf">in</span> repository)         <span class="co"># File to set environment variables.</span></span>
<span id="cb1-119"><a href="#cb1-119" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-120"><a href="#cb1-120" tabindex="-1"></a>├── <span class="fu">.Rprofile</span> (not <span class="cf">in</span> repository)         <span class="co"># R code to be run when R starts up.</span></span>
<span id="cb1-121"><a href="#cb1-121" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># It is run after the .Renviron file is sourced.</span></span>
<span id="cb1-122"><a href="#cb1-122" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-123"><a href="#cb1-123" tabindex="-1"></a>├── <span class="fu">.Rhistory</span> (not <span class="cf">in</span> repository)         <span class="co"># File containing R command history.</span></span>
<span id="cb1-124"><a href="#cb1-124" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-125"><a href="#cb1-125" tabindex="-1"></a>├── .gitignore                            <span class="co"># List of files/folders to be ignored while </span></span>
<span id="cb1-126"><a href="#cb1-126" tabindex="-1"></a>│                                         <span class="co"># using the git workflow.</span></span>
<span id="cb1-127"><a href="#cb1-127" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-128"><a href="#cb1-128" tabindex="-1"></a>├── .lintr                                <span class="co"># Configuration for linting</span></span>
<span id="cb1-129"><a href="#cb1-129" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># R projects and packages using linter.</span></span>
<span id="cb1-130"><a href="#cb1-130" tabindex="-1"></a><span class="er">|</span>        </span>
<span id="cb1-131"><a href="#cb1-131" tabindex="-1"></a>├── .renvignore                           <span class="co"># List of files/folders to be ignored when </span></span>
<span id="cb1-132"><a href="#cb1-132" tabindex="-1"></a>│                                         <span class="co"># renv is doing its snapshot.</span></span>
<span id="cb1-133"><a href="#cb1-133" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-134"><a href="#cb1-134" tabindex="-1"></a>├── DESCRIPTION[<span class="sc">*</span>]                        <span class="co"># Overall metadata of the project.</span></span>
<span id="cb1-135"><a href="#cb1-135" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-136"><a href="#cb1-136" tabindex="-1"></a>├── LICENSE                               <span class="co"># Content of the MIT license generated via</span></span>
<span id="cb1-137"><a href="#cb1-137" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># usethis::use_mit_license().</span></span>
<span id="cb1-138"><a href="#cb1-138" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-139"><a href="#cb1-139" tabindex="-1"></a>├── LICENSE.md                            <span class="co"># Content of the MIT license generated via</span></span>
<span id="cb1-140"><a href="#cb1-140" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># usethis::use_mit_license().</span></span>
<span id="cb1-141"><a href="#cb1-141" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-142"><a href="#cb1-142" tabindex="-1"></a>├── NAMESPACE                             <span class="co"># List of functions users can use or imported</span></span>
<span id="cb1-143"><a href="#cb1-143" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># from other R packages. It is generated </span></span>
<span id="cb1-144"><a href="#cb1-144" tabindex="-1"></a><span class="er">|</span>                                         <span class="co"># by devtools::document().</span></span>
<span id="cb1-145"><a href="#cb1-145" tabindex="-1"></a>│        </span>
<span id="cb1-146"><a href="#cb1-146" tabindex="-1"></a>├── README.md                             <span class="co"># GitHub README markdown file generated by Quarto.</span></span>
<span id="cb1-147"><a href="#cb1-147" tabindex="-1"></a><span class="sc">|</span></span>
<span id="cb1-148"><a href="#cb1-148" tabindex="-1"></a>├── README.qmd                            <span class="co"># GitHub README quarto file used to generate README.md. </span></span>
<span id="cb1-149"><a href="#cb1-149" tabindex="-1"></a><span class="sc">|</span>        </span>
<span id="cb1-150"><a href="#cb1-150" tabindex="-1"></a>├── _pkgdown.yml                          <span class="co"># Configuration for R package documentation</span></span>
<span id="cb1-151"><a href="#cb1-151" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># using pkgdown:::build_site_external().</span></span>
<span id="cb1-152"><a href="#cb1-152" tabindex="-1"></a><span class="er">|</span>        </span>
<span id="cb1-153"><a href="#cb1-153" tabindex="-1"></a>├── _quarto.yml                           <span class="co"># Configuration for Quarto book generation.</span></span>
<span id="cb1-154"><a href="#cb1-154" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># It is also the project configuration file.</span></span>
<span id="cb1-155"><a href="#cb1-155" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-156"><a href="#cb1-156" tabindex="-1"></a>├── csl_file.csl                          <span class="co"># Citation Style Language (CSL) file to ensure</span></span>
<span id="cb1-157"><a href="#cb1-157" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># citations follows the Lancet journal.</span></span>
<span id="cb1-158"><a href="#cb1-158" tabindex="-1"></a><span class="er">|</span>        </span>
<span id="cb1-159"><a href="#cb1-159" tabindex="-1"></a>├── custom<span class="sc">-</span>reference.docx                 <span class="co"># Microsoft word template for data harmonisation </span></span>
<span id="cb1-160"><a href="#cb1-160" tabindex="-1"></a><span class="sc">|</span>                                         <span class="co"># documentation to Word.</span></span>
<span id="cb1-161"><a href="#cb1-161" tabindex="-1"></a><span class="er">|</span></span>
<span id="cb1-162"><a href="#cb1-162" tabindex="-1"></a>├── harmonisation_template.Rproj          <span class="co"># RStudio project file.</span></span>
<span id="cb1-163"><a href="#cb1-163" tabindex="-1"></a><span class="sc">|</span>        </span>
<span id="cb1-164"><a href="#cb1-164" tabindex="-1"></a>├── index.qmd                             <span class="co"># Preface page of Quarto book content.</span></span>
<span id="cb1-165"><a href="#cb1-165" tabindex="-1"></a><span class="sc">|</span>        </span>
<span id="cb1-166"><a href="#cb1-166" tabindex="-1"></a>├── references.bib                        <span class="co"># Bibtex file for Quarto book.</span></span>
<span id="cb1-167"><a href="#cb1-167" tabindex="-1"></a><span class="sc">|</span>      </span>
<span id="cb1-168"><a href="#cb1-168" tabindex="-1"></a>└── renv.lock                             <span class="co"># Metadata of R packages installed generated</span></span>
<span id="cb1-169"><a href="#cb1-169" tabindex="-1"></a>                                          <span class="co"># using renv::snapshot().</span></span>
<span id="cb1-170"><a href="#cb1-170" tabindex="-1"></a></span>
<span id="cb1-171"><a href="#cb1-171" tabindex="-1"></a>[<span class="sc">*</span>] These files are automatically created but user needs to manually add some information.</span></code></pre></div>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="software-installation">Software Installation<a class="anchor" aria-label="anchor" href="#software-installation"></a>
</h2>
<div class="section level3">
<h3 id="installing-r">Installing R<a class="anchor" aria-label="anchor" href="#installing-r"></a>
</h3>
<p>Go to <a href="https://cran.rstudio.com/" class="external-link uri">https://cran.rstudio.com/</a>. Choose a version of R that matches the computer’s operating system.</p>
</div>
<div class="section level3">
<h3 id="installing-rstudio">Installing RStudio<a class="anchor" aria-label="anchor" href="#installing-rstudio"></a>
</h3>
<p>Go to <a href="https://posit.co/download/rstudio-desktop/" class="external-link uri">https://posit.co/download/rstudio-desktop/</a>. Scroll down and choose a version of RStudio that matches the computer’s operating system.</p>
</div>
<div class="section level3">
<h3 id="installing-rtools">Installing Rtools<a class="anchor" aria-label="anchor" href="#installing-rtools"></a>
</h3>
<p>Go to <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link uri">https://cran.r-project.org/bin/windows/Rtools/</a>. Choose a version of Rtools that matches the R version that was installed.</p>
</div>
<div class="section level3">
<h3 id="quarto">Quarto<a class="anchor" aria-label="anchor" href="#quarto"></a>
</h3>
<p>Quarto converts R scripts into a technical report or notebook in html, pdf, Microsoft Word, <a href="https://quarto.org/docs/output-formats/all-formats.html" class="external-link">etc.</a> It is installed together with RStudio. User can also go to <a href="https://quarto.org/docs/get-started/" class="external-link uri">https://quarto.org/docs/get-started/</a> to install it separately. For Quarto to be able to create pdf files, a <a href="https://quarto.org/docs/output-formats/pdf-engine.html" class="external-link">pdf engine</a> must be installed as well. For ease, it is suggested to install <a href="https://yihui.org/tinytex/" class="external-link">TinyTex</a> using the terminal command <code>quarto install tinytex</code>.</p>
<p><a href="#top">Back to top</a></p>
</div>
</div>
<div class="section level2">
<h2 id="r-package-installation">R Package Installation<a class="anchor" aria-label="anchor" href="#r-package-installation"></a>
</h2>
<p>Use Posit Public Package Manager <a href="https://packagemanager.posit.co/client" class="external-link">PPM</a> to set up your repository environment to install R packages from <a href="https://cloud.r-project.org/" class="external-link">CRAN</a>. This is because PPM allows installation of frozen R package versions based on a snapshot date.</p>
<p>One way to do that is to set in the <code>.Rprofile</code> file with the code <code>options(repos = c(P3M = "{link to repository url form Posit Public Package Manager}"))</code></p>
<p>R packages can be installed using <a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link"><code>pak::pkg_install()</code></a> from the R package <a href="https://pak.r-lib.org/" class="external-link"><code>pak</code></a> as an alternative to <a href="https://rdrr.io/r/utils/install.packages.html" class="external-link"><code>install.packages()</code></a> and <a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link"><code>remotes::install_github()</code></a>. Benefits of using <a href="https://pak.r-lib.org/" class="external-link"><code>pak</code></a> can be found <a href="https://pak.r-lib.org/reference/features.html" class="external-link">here</a></p>
<p>You can also view your repository environment using the command <a href="https://pak.r-lib.org/reference/repo_get.html" class="external-link"><code>pak::repo_get()</code></a></p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="using-renv">Using <code>renv</code>
<a class="anchor" aria-label="anchor" href="#using-renv"></a>
</h2>
<p>You can increase reproducibility by using the package <a href="https://rstudio.github.io/renv/" class="external-link"><code>renv</code></a>. Install <code>renv</code> from CRAN with <code>pak::pak("renv")</code>. If this is your first time using <code>renv</code>, start with the <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link"><code>Introduction to renv vignette</code></a>. Use <code>renv::init(bare = TRUE)</code> to start with an empty <code>renv</code> environment.</p>
<p><code>renv</code> will freeze the exact package versions you depend on (in <code>renv.lock</code>). This ensures that each collaborator (or you in the future) will use the exact same versions of these packages. Moreover <code>renv</code> provides to each project its own private package library making each project isolated from others.</p>
<p>Install required dependencies locally with <a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link"><code>pak::pkg_install()</code></a> from <a href="https://cran.r-project.org/" class="external-link">CRAN</a>, <a href="https://www.bioconductor.org/" class="external-link">Bioconductor</a>, <a href="https://r-universe.dev/search" class="external-link">R-universe</a>, etc.</p>
<p>Sometimes the right <a href="https://community.rstudio.com/t/can-not-install-packages-after-initializing-renv/106064" class="external-link">downloader</a> (libcurl or others) needs to set for installation of R packages inside the <code>renv</code> environment to be successful. Setting the R environmental variable RENV_DOWNLOAD_FILE_METHOD = “libcurl” may help.</p>
<p>Save the local environment with <a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link"><code>renv::snapshot()</code></a> to create the <code>renv.lock</code> file.</p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="r-functions-management">R Functions Management<a class="anchor" aria-label="anchor" href="#r-functions-management"></a>
</h2>
<p>R functions heavily used in this project can be found in the <code>R</code> folder. Documentation (<code>man</code> folder), test units (<code>test</code> folder) corresponding to these functions are structured the same as creating an R package. Relevant R packages required for R package development (and available on Posit Public Package Manager <a href="https://packagemanager.posit.co/client" class="external-link">PPM</a>) are</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="left">package</th>
<th align="left">description</th>
<th align="left">version</th>
<th align="left">date</th>
<th align="left">source</th>
<th align="left">repository</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">covr</td>
<td align="left">Test Coverage for Packages</td>
<td align="left">3.6.4</td>
<td align="left">2023-11-09</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">devtools</td>
<td align="left">Tools to Make Developing R Packages Easier</td>
<td align="left">2.4.5</td>
<td align="left">2022-10-11</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">lintr</td>
<td align="left">A ‘Linter’ for R Code</td>
<td align="left">3.2.0</td>
<td align="left">2025-02-12</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">pkgdown</td>
<td align="left">Make Static HTML Documentation for a Package</td>
<td align="left">2.1.1</td>
<td align="left">2024-09-17</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">roxygen2</td>
<td align="left">In-Line Documentation for R</td>
<td align="left">7.3.2</td>
<td align="left">2024-06-28</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">sinew</td>
<td align="left">Package Development Documentation and Namespace Management</td>
<td align="left">0.4.0</td>
<td align="left">2022-03-31</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">spelling</td>
<td align="left">Tools for Spell Checking in R</td>
<td align="left">2.3.1</td>
<td align="left">2024-10-04</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">testthat</td>
<td align="left">Unit Testing for R</td>
<td align="left">3.2.3</td>
<td align="left">2025-01-13</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">usethis</td>
<td align="left">Automate Package and Project Setup</td>
<td align="left">3.1.0</td>
<td align="left">2024-11-26</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
</tbody>
</table>
<p>Here is an example of the command to use <code>pak::pak("{package name}")</code> to install packages from the Posit Public Package Manager <a href="https://packagemanager.posit.co/client" class="external-link">PPM</a>.</p>
<p>There is no need to source the functions in the R folder. Use <a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link"><code>devtools::load_all()</code></a> instead. <a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link"><code>devtools::load_all()</code></a> will load required dependencies listed in <code>DESCRIPTION</code> and R functions stored in <code>R/</code>. Prior installation of these dependencies is required for the load to be successful.</p>
<p>After loading, R functions can be documented (using <a href="https://devtools.r-lib.org/reference/document.html" class="external-link"><code>devtools::document()</code></a>), tested (using <a href="https://devtools.r-lib.org/reference/test.html" class="external-link"><code>devtools::test()</code></a> and then <a href="https://devtools.r-lib.org/reference/check.html" class="external-link"><code>devtools::check()</code></a>) and even installed as an R package (using <a href="https://devtools.r-lib.org/reference/install.html" class="external-link"><code>devtools::install</code></a>).</p>
<p>More information of this workflow can be found in <a href="https://r-pkgs.org/whole-game.html" class="external-link">Chapter 1: The Whole Game</a> of the R Packages (2e) book.</p>
</div>
<div class="section level2">
<h2 id="r-packages-used">R Packages Used<a class="anchor" aria-label="anchor" href="#r-packages-used"></a>
</h2>
<p>R packages installed from Posit Public Package Manager <a href="https://packagemanager.posit.co/client" class="external-link">PPM</a> or <a href="https://cran.r-project.org/" class="external-link">CRAN</a> using command <code>pak::pkg_install("{package name}")</code> are</p>
<p>Here are all the R packages used in this analysis.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="left">package</th>
<th align="left">title</th>
<th align="left">version</th>
<th align="left">date</th>
<th align="left">source</th>
<th align="left">repository</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cli</td>
<td align="left">Helpers for Developing Command Line Interfaces</td>
<td align="left">3.6.4</td>
<td align="left">2025-02-13</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">A Grammar of Data Manipulation</td>
<td align="left">1.1.4</td>
<td align="left">2023-11-17</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">flextable</td>
<td align="left">Functions for Tabular Reporting</td>
<td align="left">0.9.7</td>
<td align="left">2024-10-27</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">fontawesome</td>
<td align="left">Easily Work with ‘Font Awesome’ Icons</td>
<td align="left">0.5.3</td>
<td align="left">2024-11-16</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">forcats</td>
<td align="left">Tools for Working with Categorical Variables (Factors)</td>
<td align="left">1.0.0</td>
<td align="left">2023-01-29</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">fs</td>
<td align="left">Cross-Platform File System Operations Based on ‘libuv’</td>
<td align="left">1.6.5</td>
<td align="left">2024-10-30</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">fst</td>
<td align="left">Lightning Fast Serialization of Data Frames</td>
<td align="left">0.9.8</td>
<td align="left">2022-02-08</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">ftExtra</td>
<td align="left">Extensions for ‘Flextable’</td>
<td align="left">0.6.4</td>
<td align="left">2024-05-10</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">glue</td>
<td align="left">Interpreted String Literals</td>
<td align="left">1.8.0</td>
<td align="left">2024-09-30</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">harmonisation</td>
<td align="left">Utility Functions For A Data Harmonisation Project</td>
<td align="left">1.0.0.0</td>
<td align="left">2025-03-14</td>
<td align="left">local</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">here</td>
<td align="left">A Simpler Way to Find Your Files</td>
<td align="left">1.0.1</td>
<td align="left">2020-12-13</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">htmltools</td>
<td align="left">Tools for HTML</td>
<td align="left">0.5.8.1</td>
<td align="left">2024-04-04</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">htmlwidgets</td>
<td align="left">HTML Widgets for R</td>
<td align="left">1.6.4</td>
<td align="left">2023-12-06</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">knitr</td>
<td align="left">A General-Purpose Package for Dynamic Report Generation in R</td>
<td align="left">1.49</td>
<td align="left">2024-11-08</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">magrittr</td>
<td align="left">A Forward-Pipe Operator for R</td>
<td align="left">2.0.3</td>
<td align="left">2022-03-30</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">openxlsx</td>
<td align="left">Read, Write and Edit xlsx Files</td>
<td align="left">4.2.8</td>
<td align="left">2025-01-25</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">pointblank</td>
<td align="left">Data Validation and Organization of Metadata for Local and Remote Tables</td>
<td align="left">0.12.2</td>
<td align="left">2024-10-23</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">purrr</td>
<td align="left">Functional Programming Tools</td>
<td align="left">1.0.4</td>
<td align="left">2025-02-05</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">quarto</td>
<td align="left">R Interface to ‘Quarto’ Markdown Publishing System</td>
<td align="left">1.4.4</td>
<td align="left">2024-07-20</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">reactable</td>
<td align="left">Interactive Data Tables for R</td>
<td align="left">0.4.4</td>
<td align="left">2023-03-12</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">readxl</td>
<td align="left">Read Excel Files</td>
<td align="left">1.4.4</td>
<td align="left">2025-02-27</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">renv</td>
<td align="left">Project Environments</td>
<td align="left">1.1.2</td>
<td align="left">2025-03-03</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">rlang</td>
<td align="left">Functions for Base Types and Core R and ‘Tidyverse’ Features</td>
<td align="left">1.1.5</td>
<td align="left">2025-01-17</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">rmarkdown</td>
<td align="left">Dynamic Documents for R</td>
<td align="left">2.29</td>
<td align="left">2024-11-04</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">sessioninfo</td>
<td align="left">R Session Information</td>
<td align="left">1.2.2</td>
<td align="left">2021-12-06</td>
<td align="left">CRAN (R 4.4.2)</td>
<td align="left"><a href="https://cran.rstudio.com" class="external-link uri">https://cran.rstudio.com</a></td>
</tr>
<tr class="even">
<td align="left">stringr</td>
<td align="left">Simple, Consistent Wrappers for Common String Operations</td>
<td align="left">1.5.1</td>
<td align="left">2023-11-14</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">testthat</td>
<td align="left">Unit Testing for R</td>
<td align="left">3.2.3</td>
<td align="left">2025-01-13</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">tibble</td>
<td align="left">Simple Data Frames</td>
<td align="left">3.2.1</td>
<td align="left">2023-03-20</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="odd">
<td align="left">tidyr</td>
<td align="left">Tidy Messy Data</td>
<td align="left">1.3.1</td>
<td align="left">2024-01-24</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
<tr class="even">
<td align="left">vroom</td>
<td align="left">Read and Write Rectangular Text Data Quickly</td>
<td align="left">1.6.5</td>
<td align="left">2023-12-05</td>
<td align="left">RSPM</td>
<td align="left"><a href="https://packagemanager.posit.co/cran/2025-03-06" class="external-link uri">https://packagemanager.posit.co/cran/2025-03-06</a></td>
</tr>
</tbody>
</table>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="r-platform-information">R Platform Information<a class="anchor" aria-label="anchor" href="#r-platform-information"></a>
</h2>
<p>Here are the R platform environment used in this analysis.</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th align="left">setting</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">version</td>
<td align="left">R version 4.4.2 (2024-10-31 ucrt)</td>
</tr>
<tr class="even">
<td align="left">os</td>
<td align="left">Windows 11 x64 (build 26100)</td>
</tr>
<tr class="odd">
<td align="left">system</td>
<td align="left">x86_64, mingw32</td>
</tr>
<tr class="even">
<td align="left">ui</td>
<td align="left">RTerm</td>
</tr>
<tr class="odd">
<td align="left">language</td>
<td align="left">(EN)</td>
</tr>
<tr class="even">
<td align="left">collate</td>
<td align="left">English_Singapore.utf8</td>
</tr>
<tr class="odd">
<td align="left">ctype</td>
<td align="left">English_Singapore.utf8</td>
</tr>
<tr class="even">
<td align="left">tz</td>
<td align="left">Asia/Singapore</td>
</tr>
<tr class="odd">
<td align="left">date</td>
<td align="left">2025-03-14</td>
</tr>
<tr class="even">
<td align="left">pandoc</td>
<td align="left">3.2 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)</td>
</tr>
<tr class="odd">
<td align="left">quarto</td>
<td align="left">1.6.37 @ C:/Program Files/Quarto/bin/quarto.exe/ (via quarto)</td>
</tr>
<tr class="even">
<td align="left">knitr</td>
<td align="left">1.49 from RSPM</td>
</tr>
</tbody>
</table>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="data-harmonisation-report-for-each-cohort">Data Harmonisation Report For Each Cohort<a class="anchor" aria-label="anchor" href="#data-harmonisation-report-for-each-cohort"></a>
</h2>
<p>To start the harmonisation of data, run the R script <code>cohort_harmonisation_script.R</code> in <code>codes</code> folder. The script will clean and harmonise the raw data and create a Quarto harmonisation report book for each cohort in html, word and pdf.</p>
<p>This involves</p>
<ul>
<li>copying a specific <code>yml</code> file (<code>_quarto_{cohort name}.yml</code>) from the <code>templates/quarto-yaml</code> folder to the project folder <code>harmonisation</code> and rename it as <code>_quarto.yml</code>, overwriting any existing <code>_quarto.yml</code> file.</li>
<li>copying a specific <code>qmd</code> file (<code>_index_report.qmd</code>) from the <code>templates/index-qmd</code> folder to the project folder <code>harmonisation</code> and rename it as <code>index.qmd</code>, overwriting any existing <code>index.qmd</code> file.</li>
</ul>
<p>Using the <code>_quarto.yml</code>, <code>index.qmd</code>, <code>references.bib</code> and <code>csl_file.csl</code> files, Quarto will then start running the Quarto scripts in the <code>codes/{cohort_name}</code> folder. This involves reading the raw data in the <code>data-raw/{cohort_name}</code> folder, placing preprocessing data in the <code>codes/{cohort_name}/preprocessed_data</code> folder, outputting the harmonised data as excel file called <code>harmonised_{cohort_name}.xlsx</code> in the <code>codes/output/harmonised</code> folder. Also, the data harmonisation process documentation will be created in the <code>reports/{cohort_name}</code> folder as a Quarto book in html, word and pdf.</p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="combined-data-harmonisation-report-for-all-cohort">Combined Data Harmonisation Report For All Cohort<a class="anchor" aria-label="anchor" href="#combined-data-harmonisation-report-for-all-cohort"></a>
</h2>
<p>To start the harmonisation of data, run the R script <code>cohort_all_harmonisation_script.R</code> in <code>codes</code> folder. The script will clean and harmonise the raw data and create a Quarto harmonisation report (all cohort combined) book in html.</p>
<p>This involves</p>
<ul>
<li>copying a specific <code>yml</code> file (<code>_quarto_all.yml</code>) from the <code>templates/quarto-yaml</code> folder to the project folder <code>harmonisation</code> and rename it as <code>_quarto.yml</code>, overwriting any existing <code>_quarto.yml</code> file.</li>
<li>copying a specific <code>qmd</code> file (<code>_index_report.qmd</code>) from the <code>templates/index-qmd</code> folder to the project folder <code>harmonisation</code> and rename it as <code>index.qmd</code>, overwriting any existing <code>index.qmd</code> file.</li>
</ul>
<p>Using the <code>_quarto.yml</code>, <code>index.qmd</code>, <code>references.bib</code> and <code>csl_file.csl</code> files, Quarto will then start running the Quarto scripts in the <code>codes/{cohort_name}</code> folder. This involves reading the raw data in the <code>data-raw/{cohort_name}</code> folder, placing preprocessing data in the <code>codes/{cohort_name}/preprocessed_data</code> folder, outputting the harmonised data as excel file called <code>harmonised_{cohort_name}.xlsx</code> in the <code>codes/output/harmonised</code> folder. Also, the data harmonisation process documentation will be created in the <code>reports/all</code> folder as a Quarto book in html.</p>
<p>A harmonisation report file can consist of a few hundred pages. It is not recommended to output the combined report as one pdf or word document file because the file size may be too large and it takes a long time to open the file.</p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="data-harmonisation-summary">Data Harmonisation Summary<a class="anchor" aria-label="anchor" href="#data-harmonisation-summary"></a>
</h2>
<p>To start creating the data harmonisation summary document, run the R script <code>harmonisation_summary_script.R</code> in <code>codes</code> folder. The script will create the document in word.</p>
<p>This involves</p>
<ul>
<li>copying a specific <code>yml</code> file (<code>_quarto_summary.yml</code>) from the <code>templates/quarto-yaml</code> folder to the project folder <code>harmonisation</code> and rename it as <code>_quarto.yml</code>, overwriting any existing <code>_quarto.yml</code> file.</li>
<li>copying a specific <code>qmd</code> file (<code>_index_summary.qmd</code>) from the <code>templates/index-qmd</code> folder to the project folder <code>harmonisation</code> and rename it as <code>index.qmd</code>, overwriting any existing <code>index.qmd</code> file.</li>
</ul>
<p>Using the <code>_quarto.yml</code>, <code>index.qmd</code>, <code>references.bib</code> and <code>csl_file.csl</code> files, Quarto will then start running the Quarto scripts in the <code>codes/harmonisation_summary</code> folder. The data harmonisation summary documentation will be created in the <code>reports/harmonisation_summary_report</code> folder as a Quarto book in word.</p>
<p><a href="#top">Back to top</a></p>
</div>
<div class="section level2">
<h2 id="general-recommendations">General Recommendations<a class="anchor" aria-label="anchor" href="#general-recommendations"></a>
</h2>
<ul>
<li>Ensure the workspace is always in a blank state. Use <a href="https://usethis.r-lib.org/reference/use_blank_slate.html" class="external-link"><code>usethis::use_blank_slate(scope = c("user", "project"))</code></a> to create this setting.</li>
<li>Keep the root of the project as clean as possible</li>
<li>Store your raw data in <code>data-raw</code>
</li>
<li>Document raw data, data dictionary, data input file and archived files modifications in <code>Flowchart.xlsx</code> provided.</li>
<li>Export modified raw data in <code>codes/{cohort_name}/preprocessed_data</code>
</li>
<li>Store only <strong>R functions</strong> in <code>R/</code>
</li>
<li>Store only <strong>R scripts</strong> and/or <strong>qmd</strong> in <code>codes/{cohort_name}_Cleaning</code>
</li>
<li>Built relative paths using <a href="https://here.r-lib.org/reference/here.html" class="external-link"><code>here::here()</code></a>
</li>
<li>Call external functions as <code>{package_name}::{function()}</code>
</li>
<li>Use <a href="https://devtools.r-lib.org/reference/document.html" class="external-link"><code>devtools::document()</code></a> to update the <code>NAMESPACE</code>
</li>
<li>Do not source your functions but use instead <a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link"><code>devtools::load_all()</code></a>. <a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link"><code>devtools::load_all()</code></a> will load required dependencies listed in <code>DESCRIPTION</code> and R functions stored in <code>R/</code>
</li>
</ul>
<p><a href="#top">Back to top</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/JauntyJJS/harmonisation/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/JauntyJJS/harmonisation/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing harmonisation</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jeremy Selva <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4498-2662" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/JauntyJJS/harmonisation/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/JauntyJJS/harmonisation/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jeremy Selva.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  
</body>
</html>
